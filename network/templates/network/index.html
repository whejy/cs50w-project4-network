{% extends "network/layout.html" %}
{% load static %}

{% block body %}
<div id="posts-page">
    {% if user.is_authenticated %}
    <div id="posts-display" class="page">
        <span id="new-post">
            <textarea placeholder="New post..."></textarea>
            <button class="submit-button" id="create-post">Post</button>
        </span>
    </div>
    {% endif %}
    <div class="page center" id="posts-list">
        {% for post in posts %}
        <div class="post">
            <span class="post-author">{{post.user}} says...</span>
            <span class="follow">Follow</span>
            <div class="post-content">{{post.post}}</div>
            {% if user.is_authenticated %}
                {% if post.liked == user %}
                    <span class="like" data-action="unlike" data-id="{{post.id}}">Unlike</span>
                {% else %}
                    <span class="like" data-action="like" data-id="{{post.id}}">Like</span>
                {% endif %}
            {% endif %}
            <span class="post-timestamp">{{post.timestamp}}</span>
        </div>
        {% endfor %}
        <nav aria-label="Page navigation example">
            {% if lower != 1 %}
            <ul class="pagination justify-content-center">
                {% if posts.has_previous %}
                    <li class="page-item"><a class="page-link" href="?page={{posts.previous_page_number}}">Previous</a></li>
                {% else %}
                    <li class="page-item disabled"><a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a></li>
                {% endif %}
                {% for page in lower %}
                    <li class="page-item"><a class="page-link" id="page{{page}}" href="?page={{page}}">{{page}}</a></li>
                {% endfor %}
                    <li class="page-item active"><a class="page-link" id="page{{page}}" href="?page={{page}}">{{posts.number}}</a></li>
                {% for page in upper %}
                    <li class="page-item"><a class="page-link" id="page{{page}}" href="?page={{page}}">{{page}}</a></li>
                {% endfor %}    
                {% if posts.has_next %}            
                    <li class="page-item"><a class="page-link" href="?page={{posts.next_page_number}}">Next</a></li>
                {% else %}
                    <li class="page-item disabled"><a class="page-link" href="#" tabindex="-1" aria-disabled="true">Next</a></li>
                {% endif %}
            </ul>
            {% endif %}
          </nav>        
    </div>
</div>
    <div id="profile-page" class="page">
        PROFILE
    </div>
    <div id="following-page" class="page">
        FOLLOWING
    </div>
{% endblock %}

{% block script %}
<script src="{% static 'network/script.js' %}"></script>
{% endblock %}